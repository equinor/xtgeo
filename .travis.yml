language: python
cache: pip
dist: xenial

env:
  CIBW_BEFORE_BUILD: travis/build-wheels.sh
  CIBW_PLATFORM: linux
  CIBW_SKIP: '*-manylinux1_i686'
  CIBW_BUILD_VERBOSITY: 2


python:
- '2.7'
- '3.4'
- '3.5'
- '3.6'

install:
- pip install -r requirements.txt -q


script:
- if [[ $TRAVIS_PYTHON_VERSION == 2.7 ]]; then export CIBW_BUILD='cp27*'; fi
- if [[ $TRAVIS_PYTHON_VERSION == 3.4 ]]; then export CIBW_BUILD='cp34*'; fi
- if [[ $TRAVIS_PYTHON_VERSION == 3.5 ]]; then export CIBW_BUILD='cp35*'; fi
- if [[ $TRAVIS_PYTHON_VERSION == 3.6 ]]; then export CIBW_BUILD='cp36*'; fi
- pip install cibuildwheel
- cibuildwheel --output-dir wheelhouse



# addons:
#   apt:
#     packages:
#     - swig

# python:
#   - '2.7'
#   - '3.6'

# # before_script:
# #   - git clone https://git@github.com/equinor/xtgeo-testdata.git ../xtgeo-testdata

# script:
#   - pip install -e .
#   - pytest tests/test_simple


# jobs:
#   include:
#     - stage: build manylinux1
#       # if: branch = master
#       langauge: minimal
#       on:
#         tags: true
#       sudo: required
#       services:
#         - docker
#       env:
#         DOCKER_IMAGE=quay.io/pypa/manylinux1_x86_64
#         PLAT=manylinux1_x86_64
#       install:
#         - docker pull $DOCKER_IMAGE
#       script:
#         - docker run --rm -e PLAT=$PLAT -v `pwd`:/io $DOCKER_IMAGE $PRE_CMD /io/travis/build-wheels.sh
#         - ls wheelhouse/

# deploy:
#   provider: pypi
